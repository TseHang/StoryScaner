<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <title>Log_in</title>
    <style>
        .panel.panel-default {
            width: 50%;
            margin: 3% auto 0 auto;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">姓名查詢</h3>
            </div>
            <div class="panel-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label for="id" class="col-sm-2 control-label">學號</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="id" placeholder="F23423423">
                            <input type="text" class="form-control" id="birthday" placeholder="1995-04-30">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">姓名</label>
                        <div class="col-sm-10">
                            <p class="form-control-static"></p>
                        </div>
                    </div>
                </form>
                <table class="table table-striped">
                    <thead>
                        <th>#</th>
                        <th>學號</th>
                        <th>姓名</th>
                    </thead>
                </table>
            </div>
            <div class="panel-footer clearfix">
                <button class="btn btn-success pull-right" id="submit">送出</button>
            </div>
        </div>


    </div>
    <script src="https://code.jquery.com/jquery-1.12.3.min.js" integrity="sha256-aaODHAgvwQW1bFOGXMeX+pC4PZIPsvn2h1sArYOhgXQ=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            $.ajax('http://luffy.ee.ncku.edu.tw/~tsebgg/StoryScaner/do.njs', {
                data: {
                    id: '*'
                },
                dataType: 'json',
                success: function (res) {
                    var tbody = document.createElement('tbody'), cnt = 0;
                    for (var id in res) {
                        var tr = document.createElement('tr'),
                            th = document.createElement('th'),
                            td_id = document.createElement('td'),
                            td_na = document.createElement('td');
                        th.innerHTML = ++cnt;
                        td_id.innerHTML = id;
                        td_na.innerHTML = res[id];
                        tr.appendChild(th);
                        tr.appendChild(td_id);
                        tr.appendChild(td_na);
                        tbody.appendChild(tr);
                    }
                    $('table').append(tbody);
                }
            });
        });
        $('form').submit(function (e) {
            e.preventDefault();
            $('button#submit').click();
        });
        $('button#submit').click(function () {
            $.ajax('http://luffy.ee.ncku.edu.tw/~tsebgg/StoryScaner/do.njs', {
                data: {
                    id: $('input#id').val()
                },
                dataType: 'text',
                success: function (res) {
                    $('p').html(res);
                }
            });
        });
    </script>
</body>

</html>
